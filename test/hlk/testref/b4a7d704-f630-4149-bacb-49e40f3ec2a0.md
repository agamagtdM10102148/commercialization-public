---
title: OptStandby - Video Memory Purge and Resume
description: OptStandby - Video Memory Purge and Resume
MSHAttr:
- 'PreferredSiteName:MSDN'
- 'PreferredLib:/library/windows/hardware'
ms.assetid: 574413d3-fdb0-4d74-8a6c-dfaeab1ec2a1
author: dawn.wood
ms.author: dawnwood
ms.date: 11/05/2018
ms.topic: article


---

# <span id="p_hlk_test.b4a7d704-f630-4149-bacb-49e40f3ec2a0"></span>OptStandby - Video Memory Purge and Resume


This automated test enables developers, testers and system integrators to exercise and record power management information from the system.

This test can be used to automate sleep and resume transitions as well as record processor power management and battery information from the system over a period of time.

The test features robust logging (capable of logging information to both a Windows Test Technologies (WTL) and XML file format) and a command-line interface.

## Test details

|||
|---|---|
| **Specifications**  | <ul><li>Device.Graphics.WDDM12.StandbyHibernateFlags.StandbyHibernateFlags</li></ul> |  
| **Platforms**   | <ul><li>Windows 10, client editions (x86)</li><li>Windows 10, client editions (x64)</li><li>Windows Server 2016 (x64)</li><li>Windows 10, client editions (ARM64)</li></ul> |
| **Supported Releases** | <ul><li>Windows 10</li><li>Windows 10, version 1511</li><li>Windows 10, version 1607</li><li>Windows 10, version 1703</li><li>Windows 10, version 1709</li><li>Windows 10, version 1803</li><li>Next update to Windows 10</li></ul> |
|**Expected run time (in minutes)**| 1 |
|**Category**| Compatibility |
|**Timeout (in minutes)**| 60 |
|**Requires reboot**| false |
|**Requires special configuration**| false |
|**Type**| automatic |



## <span id="Additional_documentation"></span><span id="additional_documentation"></span><span id="ADDITIONAL_DOCUMENTATION"></span>Additional documentation


Tests in this feature area might have additional documentation, including prerequisites, setup, and troubleshooting information, that can be found in the following topic(s):

-   [Device.Graphics additional documentation](device-graphics-additional-documentation.md)

## <span id="Running_the_test"></span><span id="running_the_test"></span><span id="RUNNING_THE_TEST"></span>Running the test


Before you run the test, complete the test setup as described in the test requirements: [Graphic Adapter or Chipset Testing Prerequisites](graphic-adapter-or-chipset-testing-prerequisites.md).

## <span id="Troubleshooting"></span><span id="troubleshooting"></span><span id="TROUBLESHOOTING"></span>Troubleshooting


For generic troubleshooting of HLK test failures, see [Troubleshooting Windows HLK Test Failures](../user/troubleshooting-windows-hlk-test-failures.md).

For troubleshooting information, see [Troubleshooting Device.Graphics Testing](troubleshooting-devicegraphics-testing.md).

## <span id="More_information"></span><span id="more_information"></span><span id="MORE_INFORMATION"></span>More information


PwrTest functionality is separated into scenarios. Currently, PwrTest supports the following scenarios:

-   Sleep - Exercises sleep and resume transition functionality. Sleep/resume transitions can be automated and target sleep states can be specified.

-   PPM - Displays and records processor power management (PPM) information and metrics. Performance (ACPI P states) and processor idle (ACPI C states) state information can be logged for a period of time at a specified interval.

-   Battery - Displays and records battery information and metrics. Battery capacity, voltage, rate of drain and estimated life time remaining can be logged for a period of time at a specified interval.

-   Info - Displays system power management information, such as available sleep states and processor power management capabilities.

-   Execution state - Displays and records thread execution state changes. Thread execution states allow applications and services to temporarily override power management settings such as the monitor and sleep idle timeouts

### <span id="Running_the_test"></span><span id="running_the_test"></span><span id="RUNNING_THE_TEST"></span>Running the test

The following sections describe how to run this test from a command line and how to interpret the log files that are created by the test binary.

**Command-Line Arguments**

PwrTest functionality and scenarios can be accessed through the command-line. The basic usage for PwrTest is:

``` syntax
usage: PwrTest /scenario [-l:path] scenario indicates the test scenario  sleep  for sleep/resume transition testing  ppm    for processor power management testing  battery   for battery information testing  info  for system capabilities information  es  for thread execution state changespath indicates the logfile path  For example, c:\logfile.xml  Default is .\PwrTest.xml
```

The logfile path can be specified as the name of the target file in the current directory, or as the path and target file in another directory. PwrTest will automatically generate an XML and WTL version of the log with the same file name and ".XML" or ".WTL" appended at the end of the file name.

To learn more about each of the PwrTest scenarios, type:

``` syntax
PwrTest /<scenario> /?
```

**Log file details**

PwrTest supports both XML and WTL log file formats. By default, PwrTest will generate both the XML and WTL logs named "PwrTestlog.xml" and "PwrTestlog.wtl", respectively. These files will be generated in the current directory.

You can use the -l:path argument to specify a different path and file name for the PwrTest log files. For example, -l:\\\\server\\share\\PwrTest\_today\\run will generate the files run.xml and run.wtl in the folder \\\\server\\share\\PwrTest\_today\\.

The WTL log file format is common to all Microsoft Windows Driver Kit (WDK) tools that use the WTTlog interface.

The PwrTest XML log file format is described in detail with the scenario information below. However, all PwrTest XML log files have the following root element:

``` syntax
  <PwrTestLog   date="today's date"   time="beginning time"   filename = "logfile path">  ... scenario information ...   </PwrTestLog>
```

### <span id="Sleep_scenario_information"></span><span id="sleep_scenario_information"></span><span id="SLEEP_SCENARIO_INFORMATION"></span>Sleep scenario information

The PwrTest Sleep scenario is designed to facilitate automated testing of sleep and resume transitions. PwrTest is capable of directing the platform into one or more sleep states in an automated fashion and logging sleep state performance information such as the BIOS initialization and total resume times.

To learn more about the Sleep Scenario, type:

``` syntax
PwrTest /sleep /?
```

The PwrTest Sleep scenario supports the command-line arguments in the following table.

<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>Argument</th>
<th>Description</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>/c:n</strong></p></td>
<td><p>n indicates the number of sleep cycles</p></td>
<td><p>/c:1</p></td>
</tr>
<tr class="even">
<td><p><strong>/d:n</strong></p></td>
<td><p>n indicates the delay time between consecutive sleep cycles, in seconds.</p></td>
<td><p>/d:90</p></td>
</tr>
<tr class="odd">
<td><p><strong>/p:n</strong></p></td>
<td><p>n indicates the time the system will sleep before automatically waking for the next sleep cycle, in seconds.</p></td>
<td><p>/p:60</p></td>
</tr>
<tr class="even">
<td><p><strong>/h:y</strong></p></td>
<td><p>Indicates hybrid sleep transitions should be enabled.</p></td>
<td><p>Current user power policy</p></td>
</tr>
<tr class="odd">
<td><p><strong>/h:n</strong></p></td>
<td><p>Indicates hybrid sleep transitions should be disabled.</p></td>
<td><p>Current user power policy</p></td>
</tr>
<tr class="even">
<td><p><strong>/t:y</strong></p></td>
<td><p>Indicates sleep transitions should be marked critical. Applications and services are not able to prevent the sleep transition.</p></td>
<td><p>Current user power policy</p></td>
</tr>
<tr class="odd">
<td><p><strong>/t:n</strong></p></td>
<td><p>Indicates sleep transitions should not be marked critical. Applications and services are able to prevent the sleep transition.</p></td>
<td><p>Current user power policy</p></td>
</tr>
<tr class="even">
<td><p><strong>/s:n</strong></p></td>
<td><p>n indicates the target sleep state(s) for the sleep transitions. Possible values are:</p>
<ul>
<li><p>&quot;all&quot;, All ACPI sleep states should be used in sequential order (S1, S3, S4, S1, S3, S4...)</p></li>
<li><p>&quot;rnd&quot;, All ACPI sleep states should be used in random order (S1, S4, S3, S1, S4, S1...)</p></li>
<li><p>&quot;1&quot;, Only S1 state should be used.</p></li>
<li><p>&quot;3&quot;, Only S3 state (&quot;Standby&quot;) should be used.</p></li>
<li><p>&quot;4&quot;, Only S4 state (&quot;Hibernate&quot;) should be used.</p></li>
</ul></td>
<td><p>/s:3</p></td>
</tr>
<tr class="odd">
<td><p><strong>/unattend</strong></p></td>
<td><p>Indicates the system should wake unattended. PwrTest will not request the display to be enabled between each sleep cycle.</p></td>
<td><p>This feature is disabled by default.</p></td>
</tr>
</tbody>
</table>



**Examples**

``` syntax
PwrTest /sleep /c:7 /s:3
```

PwrTest will cycle the system through 7 standby transitions and save the output file information to .\\PwrTestlog.xml and .\\PwrTestlog.wtl.

``` syntax
PwrTest /sleep /c:1 /s:1
```

PwrTest will cycle the system through a single S1 transition and save the output file information to .\\PwrTestlog.xml and .\\PwrTestlog.wtl.

``` syntax
PwrTest /sleep /c:10 /s:rnd /d:180 /p:600 /l:random
```

PwrTest will cycle the system through 10 sleep/resume cycles with a random target sleep state from the available sleep states on the system. The system will sleep for 10 minutes on each sleep cycle and the delay between sleep cycles will be 3 minutes. The output will be saved to .\\random.xml and .\\random.wtl.

**XML Logfile Output**

The Sleep scenario generates the following XML elements:

``` syntax
  <SleepScenario>   <SleepTransitions   critical=""   hybrid=""   delay=""   sleeptime="">    <SleepTransition   number=""   status="">    <StartT></StartT>    <EndT></EndT>    <Duration></Duration>    <TargetState></TargetState>    <EffectiveState></EffectiveState>    <BIOSInit></BIOSInit>    <DriverInit></DriverInit>    <Suspend></Suspend>    <Resume></Resume>    <HiberRead></HiberRead>    <HiberWrite></HiberWrite>    </SleepTransition>   <SleepTransition   number=""   status="">    <StartT></StartT>    <EndT></EndT>    <Duration></Duration>    <TargetState></TargetState>    <EffectiveState></EffectiveState>    <BIOSInit></BIOSInit>    <DriverInit></DriverInit>    <Suspend></Suspend>    <Resume></Resume>    <HiberRead></HiberRead>    <HiberWrite></HiberWrite>    </SleepTransition>   </SleepTransitions>   </SleepScenario>
```

This table describes the Sleep scenario XML elements in detail.

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>&lt;SleepScenario&gt;</p></td>
<td><p>Contains information related to the sleep scenario. Only one &lt;SleepScenario&gt; element per PwrTest log file.</p></td>
</tr>
<tr class="even">
<td><p>&lt;SleepTransitions&gt;</p></td>
<td><p>Provides overall data about the sleep transition cycles such as the state of critical and hybrid sleep features.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;SleepTransition&gt;</p></td>
<td><p>Provides per-sleep cycle information such as the start and end times, as well as details about the resume time such as the BIOS initialization time. A &lt;SleepTransition&gt; element is generated for each sleep transition cycle.</p></td>
</tr>
<tr class="even">
<td><p>&lt;StartT&gt;</p></td>
<td><p>Indicates the start time of the sleep cycle. (hh:mm:ss)</p></td>
</tr>
<tr class="odd">
<td><p>&lt;EndT&gt;</p></td>
<td><p>Indicates the end time of the sleep cycle. (hh:mm:ss)</p></td>
</tr>
<tr class="even">
<td><p>&lt;Duration&gt;</p></td>
<td><p>Indicates the duration of the sleep cycle. (hh:mm:ss)</p></td>
</tr>
<tr class="odd">
<td><p>&lt;TargetState&gt;</p></td>
<td><p>Indicates the target sleep state.</p></td>
</tr>
<tr class="even">
<td><p>&lt;EffectiveState&gt;</p></td>
<td><p>Indicates the effective sleep state.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;BIOSInit&gt;</p></td>
<td><p>Indicates the amount of time required to initialize the BIOS (TargetState must be 3) on resume in milliseconds.</p></td>
</tr>
<tr class="even">
<td><p>&lt;DriverInit&gt;</p></td>
<td><p>Indicates the amount of time required to initialize drivers on resume in milliseconds.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;Suspend&gt;</p></td>
<td><p>Indicates the amount of time required to suspend the system in milliseconds.</p></td>
</tr>
<tr class="even">
<td><p>&lt;Resume&gt;</p></td>
<td><p>Indicates the total amount of time required to resume the system in milliseconds.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;HiberRead&gt;</p></td>
<td><p>Indicates the time required to read the hibernation file in milliseconds. (TargetState must be 4).</p></td>
</tr>
<tr class="even">
<td><p>&lt;HiberWrite&gt;</p></td>
<td><p>Indicates the time required to write the hibernation file in milliseconds. (EffectiveState must be 4).</p></td>
</tr>
</tbody>
</table>



### <span id="PPM_scenario_information"></span><span id="ppm_scenario_information"></span><span id="PPM_SCENARIO_INFORMATION"></span>PPM scenario information

The PwrTest PPM scenario is designed to facilitate automated inspection of processor power management capabilities and run-time information. PwrTest is capable of recording system usage of processor performance and processor idle states over a duration of time.

These metrics can be analyzed post-run from the PwrTest logfile and compared to past or future runs of PwrTest.

To learn more about the PPM Scenario, type:

``` syntax
PwrTest /ppm /?
```

The PwrTest PPM scenario supports the command-line arguments in the following table.

<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>Argument</th>
<th>Description</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>/n:n</strong></p></td>
<td><p>n indicates the number of cycles of processor information to log.</p></td>
<td><p>/c:100</p></td>
</tr>
<tr class="even">
<td><p><strong>/i:n</strong></p></td>
<td><p>n indicates the polling interval (in milliseconds) to update processor information. PwrTest will record processor information for the number of cycles specified by /n:n multiplied by the polling interval specified by /i:n.</p></td>
<td><p>/i:5000</p></td>
</tr>
<tr class="odd">
<td><p><strong>/c:y</strong></p></td>
<td><p>Indicates that processor idle (ACPI C-state) information should be logged.</p></td>
<td><p>(default)</p></td>
</tr>
<tr class="even">
<td><p><strong>/c:n</strong></p></td>
<td><p>Indicates that processor idle (ACPI C-state) information should not be logged.</p></td>
<td><p>[This content isn&#39;t available yet.]</p></td>
</tr>
<tr class="odd">
<td><p><strong>/p:y</strong></p></td>
<td><p>Indicates that processor performance / throttle state information should be logged.</p></td>
<td><p>(default)</p></td>
</tr>
<tr class="even">
<td><p><strong>/p:n</strong></p></td>
<td><p>Indicates that processor performance / throttle state information should not be logged.</p></td>
<td><p>[This content isn&#39;t available yet.]</p></td>
</tr>
<tr class="odd">
<td><p><strong>/u:y</strong></p></td>
<td><p>Indicates that CPU utilization information should be logged.</p></td>
<td><p>(default)</p></td>
</tr>
<tr class="even">
<td><p><strong>/u:n</strong></p></td>
<td><p>Indicates that CPU utilization information should not be logged.</p></td>
<td><p>[This content isn&#39;t available yet.]</p></td>
</tr>
</tbody>
</table>



**Examples**

``` syntax
PwrTest /ppm /n:10 /i:6000
```

PwrTest will record all processor power management information for one minute at 6 second intervals.

``` syntax
PwrTest /ppm /n:3600 /i:1000 /p:n
```

PwrTest will record processor performance state information every second for an hour

``` syntax
PwrTest /ppm /n:3600 /i:1000 /u:y /p:n /c:n
```

PwrTest will record processor utilization only for one-second intervals for an hour.

**XML Logfile Output**

The PPM scenario generates the following XML elements:

``` syntax
<PPMScenario>  <ProcessorInformation>  <PerformanceStates>  <PerformanceState    number="0"   frequency=""   percentofmaxfrequency=""   type="" />  </PerformanceStates>  <ProcessorName> </ProcessorName>  <InterfaceType> </InterfaceType>   <TransitionLatency units=""></TransitionLatency>  </ProcessorInformation>  <ProcessorTraces interval="">  <Trace>  <CpuId></CpuId>  <ElapsedT></ElapsedT>  <CPUIdle></CPUIdle>  <PState></PState>  <Frequency></Frequency>  <PercentOfMax></PercentOfMax>  <PStateType></PStateType>  <COne></COne>  <CTwo></COne>  <CThree></CThree>  </Trace>   </ProcessorTraces>   </PPMScenario>
```

This table describes the PPM scenario XML elements in detail.

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>&lt;PPMScenario&gt;</p></td>
<td><p>Contains information related to the PPM scenario. Only one &lt;SleepScenario&gt; element per PwrTest log file.</p></td>
</tr>
<tr class="even">
<td><p>&lt;ProcessorInformation&gt;</p></td>
<td><p>Contains information related to the static attributes of the processor, such as performance and throttle state capabilities.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;PerformanceStates&gt;</p></td>
<td><p>Contains a list of &lt;PerformanceState&gt; elements.</p></td>
</tr>
<tr class="even">
<td><p>&lt;PerformanceState&gt;</p></td>
<td><p>Indicates an available performance or throttle state. Includes state number, frequency, percentage of maximum frequency and type attributes.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;ProcessorName&gt;</p></td>
<td><p>Indicates the friendly name of the processor.</p></td>
</tr>
<tr class="even">
<td><p>&lt;InterfaceType&gt;</p></td>
<td><p>Indicates the mechanism used to interface between Windows and platform processor power management features.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;TransitionLatency&gt;</p></td>
<td><p>Indicates the latency when switching performance states. Includes an units attribute, typically &quot;us&quot;.</p></td>
</tr>
<tr class="even">
<td><p>&lt;ProcessorTraces&gt;</p></td>
<td><p>Contains a list of &lt;Trace&gt; elements. Includes an interval attribute indicating the interval of each &lt;Trace&gt; element.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;Trace&gt;</p></td>
<td><p>Contains trace information, which will vary depending on the command-line arguments presented to PwrTest.</p></td>
</tr>
<tr class="even">
<td><p>&lt;CpuId&gt;</p></td>
<td><p>Identifies the processor.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;ElapsedT&gt;</p></td>
<td><p>Indicates the elapsed time since the start of PwrTest in milliseconds.</p></td>
</tr>
<tr class="even">
<td><p>&lt;CPUIdle&gt;</p></td>
<td><p>Indicates the percentage of processor idle time.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;PState&gt;</p></td>
<td><p>Indicates the current processor performance state.</p></td>
</tr>
<tr class="even">
<td><p>&lt;Frequency&gt;</p></td>
<td><p>Indicates the actual frequency of the current processor performance state in Megahertz.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;PercentOfMax&gt;</p></td>
<td><p>Indicates the percentage of maximum frequency for the current performance state.</p></td>
</tr>
<tr class="even">
<td><p>&lt;PStateType&gt;</p></td>
<td><p>Indicates if the performance state is a performance state (1) or a throttle state (0).</p></td>
</tr>
<tr class="odd">
<td><p>&lt;COne&gt;</p></td>
<td><p>Indicates the percentage of CPU idle time spent in the C1 CPU idle state.</p></td>
</tr>
<tr class="even">
<td><p>&lt;CTwo&gt;</p></td>
<td><p>Indicates the percentage of CPU idle time spent in the C2 CPU idle state.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;CThree&gt;</p></td>
<td><p>Indicates the percentage of CPU idle time spent in the C3 CPU idle state.</p></td>
</tr>
</tbody>
</table>



### <span id="Battery_scenario_information"></span><span id="battery_scenario_information"></span><span id="BATTERY_SCENARIO_INFORMATION"></span>Battery scenario information

The PwrTest Battery scenario is designed to facilitate automated inspection of battery and power source information. PwrTest is capable of logging battery capacity, voltage, rate of drain and general state for up to two batteries on the system. Battery data is logged at a specified interval for a specified number of cycles.

To learn more about the Battery Scenario, type:

``` syntax
PwrTest /battery /?
```

The PwrTest Battery scenario supports the command-line arguments in the following table.

<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>Argument</th>
<th>Description</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>/n:n</strong></p></td>
<td><p>n indicates the number of cycles of battery information to log.</p></td>
<td><p>/c:100</p></td>
</tr>
<tr class="even">
<td><p><strong>/i:n</strong></p></td>
<td><p>n indicates the polling interval (in milliseconds) to update battery information.</p></td>
<td><p>/i:5000</p></td>
</tr>
<tr class="odd">
<td><p><strong>/b:n</strong></p></td>
<td><p>n indicates the which battery to log information from (0 or 1).</p></td>
<td><p>/b:all</p></td>
</tr>
<tr class="even">
<td><p><strong>/b:all</strong></p></td>
<td><p>Indicates battery information should be logged from all batteries.</p></td>
<td><p>/b:all</p></td>
</tr>
</tbody>
</table>



**Examples**

``` syntax
PwrTest /battery /n:10 /i:6000
```

PwrTest will record all battery information for one minute at 6 second intervals

``` syntax
PwrTest /battery /n:10 /i:6000 /b:0
```

PwrTest will record battery information only from battery 0 for one minute at 6 second intervals.

**XML Logfile Output**

The Battery scenario generates the following XML elements:

``` syntax
<BatteryScenario>  <Batteries>  <Battery  id="" shortterm="" rechargable="" >  <Name></Name>  <UniqueID></UniqueID>  <Chemistry></Chemistry>  <Manufacturer></Manufacturer>  <DesignedCapacity></DesignedCapacity>  <FullChargeCapacity></FullChargeCapacity>  <CriticalBias></CriticalBias>  <CycleCount></CycleCount>  <ManufactureDate></ManufactureDate>  <FullLifeTime Units=""></FullLifeTime>  </Battery>   </Batteries>  <BatteryTraces interval="">  <Trace>  <ElapsedT></ElapsedT>  <ACStatus></ACStatus>  <Capacity id=""></Capacity>  <TimeRemaining></TimeRemaining>  <Capacity id=""></Capacity>  <RateOfDrain id=""></RateOfDrain>  <Voltage id=""></Voltage>  <Capacity id=""></Capacity>  <RateOfDrain id=""></RateOfDrain>  <Voltage id=""> </Voltage>  </Trace>  </BatteryTraces>   </BatteryScenario>
```

This table describes the PPM scenario XML elements in detail.

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>&lt;BatteryScenario&gt;</p></td>
<td><p>Contains information related to the battery scenario. Only one &lt;BatteryScenario&gt; element per PwrTest log file.</p></td>
</tr>
<tr class="even">
<td><p>&lt;Batteries&gt;</p></td>
<td><p>Contains information related to the static attributes of the system batteries, such as manufacturer and cycle count information. Note, all information may not be available for each battery.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;Battery&gt;</p></td>
<td><p>Contains static information about a system battery. An id attribute is present to uniquely identify the battery.</p></td>
</tr>
<tr class="even">
<td><p>&lt;Name&gt;</p></td>
<td><p>Indicates the name of the battery.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;UniqueID&gt;</p></td>
<td><p>Indicates the unique ID of the battery.</p></td>
</tr>
<tr class="even">
<td><p>&lt;Chemistry&gt;</p></td>
<td><p>Indicates battery chemistry.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;Manufacturer&gt;</p></td>
<td><p>Indicates the battery manufacturer.</p></td>
</tr>
<tr class="even">
<td><p>&lt;DesignedCapacity&gt;</p></td>
<td><p>Indicates the designed capacity of the battery in mWh.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;FullChargeCapacity&gt;</p></td>
<td><p>Indicates the fully charged capacity of the battery in mWh</p></td>
</tr>
<tr class="even">
<td><p>&lt;CriticalBias&gt;</p></td>
<td><p>Indicates a bias from zero, in mWh, which is applied to the battery reporting.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;CycleCount&gt;</p></td>
<td><p>Indicates the number of charge/discharge cycles the battery has experienced.</p></td>
</tr>
<tr class="even">
<td><p>&lt;ManufactureDate&gt;</p></td>
<td><p>Indicates the manufacture date of the battery.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;FullLifeTime&gt;</p></td>
<td><p>Indicates the battery full life time in seconds.</p></td>
</tr>
<tr class="even">
<td><p>&lt;BatteryTraces&gt;</p></td>
<td><p>Contains a list of &lt;Trace&gt; elements. Has an attribute indicating the battery information polling interval.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;Trace&gt;</p></td>
<td><p>Contains information about battery status such as voltage, capacity and rate of drain for a given interval.</p></td>
</tr>
<tr class="even">
<td><p>&lt;ElapsedT&gt;</p></td>
<td><p>Indicates the elapsed time since PwrTest was started.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;ACStatus&gt;</p></td>
<td><p>Indicates if the system is running on AC (1) or battery (0) power.</p></td>
</tr>
<tr class="even">
<td><p>&lt;TimeRemaining&gt;</p></td>
<td><p>Indicates the battery life time remaining from all system batteries, in seconds.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;Capacity&gt;</p></td>
<td><p>Indicates the capacity of the battery in mWh. Has an id attribute to indicate which battery the capacity is being reported for.</p></td>
</tr>
<tr class="even">
<td><p>&lt;RateOfDrain&gt;</p></td>
<td><p>Indicates the rate of drain of the battery in mW. Has an id attribute to indicate which battery the rate of drain is being reported for.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;Voltage&gt;</p></td>
<td><p>Indicates the battery voltage in mV. Has an id attribute to indicate which battery the voltage is being reported for.</p></td>
</tr>
</tbody>
</table>



### <span id="Info_scenario_information"></span><span id="info_scenario_information"></span><span id="INFO_SCENARIO_INFORMATION"></span>Info scenario information

The PwrTest Info scenario is designed to log and display system power management capabilities and information, such as the availability of system power states.

To learn more about the Info Scenario, type:

``` syntax
PwrTest /info /?
```

The PwrTest Info scenario supports the command-line arguments in the following table.

<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>Argument</th>
<th>Description</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>/info:powercap</strong></p></td>
<td><p>Display SYSTEM_POWER_CAPABILITIES, which includes information about the availability of system sleep states.</p></td>
<td><p>(none)</p></td>
</tr>
<tr class="even">
<td><p><strong>/info:powerinfo</strong></p></td>
<td><p>Display SYSTEM_POWER_INFORMATION which displays dynamic data about current idle thresholds and timers.</p></td>
<td><p>(none)</p></td>
</tr>
<tr class="odd">
<td><p><strong>/info:battery</strong></p></td>
<td><p>Display SYSTEM_BATTERY_STATE which contains information about the current state of the system battery.</p></td>
<td><p>(none)</p></td>
</tr>
<tr class="even">
<td><p><strong>/info:ppm</strong></p></td>
<td><p>Display PROCESSOR_POWER_INFORMATION which contains information about the system processor.</p></td>
<td><p>(none)</p></td>
</tr>
<tr class="odd">
<td><p><strong>/info:all</strong></p></td>
<td><p>Display all supported information data.</p></td>
<td><p>(none)</p></td>
</tr>
</tbody>
</table>



**Examples**

``` syntax
PwrTest /info:powercap
```

PwrTest will display and log system power capabilities information from the SYSTEM\_POWER\_CAPABILITIES structure.

``` syntax
PwrTest /info:all
```

PwrTest will display and log all supported information data.

**XML Logfile Output**

The Info scenario generates the following XML elements:

``` syntax
<InfoScenario>  <SYSTEM_POWER_CAPABILITIES>   <SystemS1StateSupported></SystemS1StateSupported>  <SystemS2StateSupported></SystemS2StateSupported>  <SystemS3StateSupported></SystemS3StateSupported>   <SystemS4StateSupported></SystemS4StateSupported>  <SystemS5StateSupported></SystemS5StateSupported>  <RtcWakeSupported></RtcWakeSupported>  <FastSystemS4></FastSystemS4>  </SYSTEM_POWER_CAPABILITIES>   <SYSTEM_POWER_INFORMATION>    <MaxIdlenessAllowed></MaxIdlenessAllowed>  <Idleness></Idleness>  <TimeRemaining></TimeRemaining>  <CoolingMode></CoolingMode>  </SYSTEM_POWER_INFORMATION>   <SYSTEM_BATTERY_STATE>   <AcOnLine></AcOnLine>  <BatteryPresent></BatteryPresent>  <Charging></Charging>  <Discharging></Discharging>  <MaxCapacity></MaxCapacity>  <RemainingCapacity></RemainingCapacity>  <RateOfDrain></RateOfDrain>  <EstimatedTime></EstimatedTime>  <DefaultAlert1></DefaultAlert1>  <DefaultAlert2></DefaultAlert2>  </SYSTEM_BATTERY_STATE>   <PROCESSOR_POWER_INFORMATION>   <CPUNumber></CPUNumber>  <MaxMhz></MaxMhz>  <CurrentMhz></CurrentMhz>  <MhzLimit></MhzLimit>  <MaxIdleState></MaxIdleState>  <CurrentIdleState></CurrentIdleState>  </PROCESSOR_POWER_INFORMATION>   </InfoScenario>
```

This table describes the PPM scenario XML elements in detail.28

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>&lt;InfoScenario&gt;</p></td>
<td><p>Contains information related to the info scenario. Only one &lt;InfoScenario&gt; element per PwrTest log file.</p></td>
</tr>
<tr class="even">
<td><p>&lt;SYSTEM_POWER_CAPABILITIES&gt;</p></td>
<td><p>Contains information related to system power capabilities. This information is retrieved from the SYSTEM_POWER_CAPABILITIES structure.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;SystemSxStateSupported&gt;</p></td>
<td><p>Indicates if a given system ACPI sleep state is supported on the system.</p></td>
</tr>
<tr class="even">
<td><p>&lt;RtcWakeSupported&gt;</p></td>
<td><p>Indicates the lowest sleep state where RTC wake (wake on timer) is supported. The value is of the SYSTEM_POWER_STATE enumeration.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;FastSystemS4&gt;</p></td>
<td><p>Indicates if hybrid sleep is available on the system.</p></td>
</tr>
<tr class="even">
<td><p>&lt;SYSTEM_POWER_INFORMATION&gt;</p></td>
<td><p>Contains information related to the idleness of the system.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;MaxIdlenessAllowed&gt;</p></td>
<td><p>Indicates the idleness (in percentage) when the system is considered idle and the idle timeout begins counting.</p></td>
</tr>
<tr class="even">
<td><p>&lt;Idleness&gt;</p></td>
<td><p>Current idle level, expressed in percentage.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;TimeRemaining&gt;</p></td>
<td><p>Indicates the time remaining in the system standby idle timer, in seconds</p></td>
</tr>
<tr class="even">
<td><p>&lt;CoolingMode&gt;</p></td>
<td><p>Indicates the current system cooling mode: (0) Active, (1), Passive, (2) Invalid.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;SYSTEM_BATTERY_STATE&gt;</p></td>
<td><p>Contains information related to the current state of the system battery.</p></td>
</tr>
<tr class="even">
<td><p>&lt;AcOnLine&gt;</p></td>
<td><p>Indicates if the system is currently operating on AC power.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;BatteryPresent&gt;</p></td>
<td><p>Indicates if at least one battery is present in the system.</p></td>
</tr>
<tr class="even">
<td><p>&lt;Charging&gt;</p></td>
<td><p>Indicates if at least one battery is currently charging.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;Discharging&gt;</p></td>
<td><p>Indicates if at least one battery is currently discharging.</p></td>
</tr>
<tr class="even">
<td><p>&lt;MaxCapacity&gt;</p></td>
<td><p>Maximum capacity of the battery when new, in mWh.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;RemainingCapacity&gt;</p></td>
<td><p>Estimated remaining capacity of the battery, in mWh.</p></td>
</tr>
<tr class="even">
<td><p>&lt;RateOfDrain&gt;</p></td>
<td><p>Indicates the current rate of discharge of the battery in mW.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;EstimatedTime&gt;</p></td>
<td><p>Estimated time remaining on the battery, in seconds.</p></td>
</tr>
<tr class="even">
<td><p>&lt;DefaultAlert1&gt;</p></td>
<td><p>Indicates the battery manufacturers suggested capacity when a low battery alert should occur.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;DefaultAlert2&gt;</p></td>
<td><p>Indicates the battery manufacturers suggested capacity when a warning battery alert should occur.</p></td>
</tr>
<tr class="even">
<td><p>&lt;PROCESSOR_POWER_INFORMATION&gt;</p></td>
<td><p>Contains information related to the system processors and their power management capabilities.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;CPUNumber&gt;</p></td>
<td><p>Indicates which processor the current &lt;PROCESSOR_POWER_INFORMATION&gt; element is describing.</p></td>
</tr>
<tr class="even">
<td><p>&lt;MaxMhz&gt;</p></td>
<td><p>Indicates the maximum frequency of the processor.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;CurrentMhz&gt;</p></td>
<td><p>Indicates the current frequency of the processor.</p></td>
</tr>
<tr class="even">
<td><p>&lt;MhzLimit&gt;</p></td>
<td><p>Indicates the current limit on the processor clock frequency.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;MaxIdleState&gt;</p></td>
<td><p>Indicates the maximum idle state of the processor.</p></td>
</tr>
<tr class="even">
<td><p>&lt;CurrentIdleState&gt;</p></td>
<td><p>Indicates the current idle state of the processor.</p></td>
</tr>
</tbody>
</table>



### <span id="Execution_state_scenario_information"></span><span id="execution_state_scenario_information"></span><span id="EXECUTION_STATE_SCENARIO_INFORMATION"></span>Execution state scenario information

The PwrTest Execution State scenario is designed to log and display thread execution state change events.

Applications and services may temporarily override power management settings such as the monitor and sleep idle time outs by changing their thread execution state. Execution state for a given thread can be changed through the Microsoft Win32 SetThreadExecutionState() API.

The Execution State scenario will display and log in real-time applications and services that are changing their thread execution state. This can be useful to diagnose applications and services that are preventing the monitor or system from going idle.

For more information about the SetThreadExecutionState() API, see SetThreadExecutionState on the MSDN Web site.

To learn more about the Execution State scenario, type:

``` syntax
PwrTest /es /?
```

The PwrTest /es scenario can be exited by pressing the 'q' key.

> [!NOTE]
> 
> PwrTest is not capable of determining changes to thread execution state before the Execution State scenario is started.



<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>Argument</th>
<th>Description</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>(no arguments)</strong></p></td>
<td><p>Not applicable</p></td>
<td><p>Not applicable</p></td>
</tr>
</tbody>
</table>



**Examples**

``` syntax
PwrTest /es
```

PwrTest will display and log changes to thread execution state.

**XML Logfile Output**

The Execution State scenario generates the following XML elements:

``` syntax
<ExecutionState>   <EsChange>   <Time>09:13:47</Time>  <Process>\Device\HarddiskVolume1\Program Files\Windows Media Player\wmplayer.exe</Process>  <RawState>0x80000001</RawState>  <Continuous>TRUE</Continuous>  <System>TRUE</System>  <Display>FALSE</Display>  <AwayMode>FALSE</AwayMode>  </EsChange>   <EsChange>   <Time>09:13:47</Time>  <Process>\Device\HarddiskVolume1\Program Files\Windows Media Player\wmplayer.exe</Process>  <RawState>0x80000003</RawState>  <Continuous>TRUE</Continuous>  <System>TRUE</System>  <Display>TRUE</Display>  <AwayMode>FALSE</AwayMode>  </EsChange>   </ExecutionState>
```

The following table describes the Execution State scenario XML elements in detail.

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>&lt;ExecutionState&gt;</p></td>
<td><p>Contains information related to the execution state scenario. Only one &lt;ExecutionState&gt; element per PwrTest log file.</p></td>
</tr>
<tr class="even">
<td><p>&lt;EsChange&gt;</p></td>
<td><p>Contains information related a single thread execution state change event. There will be one &lt;EsChange&gt; element for each thread execution state change event recorded in the PwrTest log file.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;Time&gt;</p></td>
<td><p>Indicates the time when the execution state change event occurred.</p></td>
</tr>
<tr class="even">
<td><p>&lt;Process&gt;</p></td>
<td><p>Indicates the path to the image file for the process that requested the execution state change.</p></td>
</tr>
<tr class="odd">
<td><p>&lt;RawState&gt;</p></td>
<td><p>Indicates the request execution state. This state is a 32-bit value of type EXECUTION_STATE (see Windows.h).</p></td>
</tr>
<tr class="even">
<td><p>&lt;Continuous&gt;</p></td>
<td><p>Indicates if the process requested the execution state change to be continuous (ES_CONTINUOUS).</p></td>
</tr>
<tr class="odd">
<td><p>&lt;System&gt;</p></td>
<td><p>Indicates if the process requested the system to be available (ES_SYSTEM_REQUIRED).</p></td>
</tr>
<tr class="even">
<td><p>&lt;Display&gt;</p></td>
<td><p>Indicates if the process requested the display to be available (ES_DISPLAY_REQUIRED).</p></td>
</tr>
<tr class="odd">
<td><p>&lt;AwayMode&gt;</p></td>
<td><p>Indicates if the process requested away mode to be enabled (ES_AWAYMODE_REQUIRED).</p></td>
</tr>
</tbody>
</table>



### <span id="Command_syntax"></span><span id="command_syntax"></span><span id="COMMAND_SYNTAX"></span>Command syntax

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Command option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><strong>Pwrtest.exe /sleep /c:1 /d:90 /p:60 /s:standby /unattend /ln:VMPWR</strong></p></td>
<td><p>Runs the OptStandby - Video Memory Purge and Resume test job.</p></td>
</tr>
</tbody>
</table>

> [!NOTE]
> 
> For command-line help for this test binary, type **/h**.



### <span id="File_list"></span><span id="file_list"></span><span id="FILE_LIST"></span>File list

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>File</th>
<th>Location</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Pwrtest.exe</p></td>
<td><p><em>&lt;[testbinroot]&gt;</em>\nttest\tools\acpi\pwrtest&lt;/p&gt;</td>
</tr>
</tbody>
</table>



### <span id="Parameters"></span><span id="parameters"></span><span id="PARAMETERS"></span>Parameters

| Parameter name         | Parameter description |
|------------------------|-----------------------|
| **LLU\_NetAccessOnly** | LLU Name for net user |












